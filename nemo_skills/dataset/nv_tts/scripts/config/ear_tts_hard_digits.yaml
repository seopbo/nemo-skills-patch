# TTS Pipeline Configuration - EAR TTS with Hard Digits

# Cluster and execution settings
cluster: eos
partition: batch
mount_paths: /lustre:/lustre
output_dir: /lustre/fsw/llmservice_nemo_speechlm/users/vmendelev/tmp/nv_tts_eval_ear_tts_hard_digits_a2

# === COPY THESE FROM OCI TO EOS ===
# Container (copy from: /lustre/fsw/portfolios/convai/users/ecasanova/docker_images/nemo_duplex_november_eartts.sqsh)
container: /lustre/fsw/llmservice_nemo_speechlm/users/vmendelev/containters/nemo_duplex_november_eartts.sqsh

# NeMo code paths (separate for generation and scoring)
generation_code_path: /lustre/fsw/llmservice_nemo_speechlm/users/vmendelev/code/NeMo-release_not_rebased
scoring_code_path: /lustre/fsw/llmservice_nemo_speechlm/users/vmendelev/experimenta/tts_eval/NeMo

# Generation settings
generation:
  benchmarks: nv_tts.riva_hard_digits
  # Model checkpoint (copy from: /lustre/fsw/portfolios/convai/users/ecasanova/Checkpoints/Nemotron-VoiceChat-november/duplex-eartts-2mim_sw_et_eos_dp_eos_dup_fp32-stt-3-december_stt_edresson_model_R_digits_norm_eip_0.1_EA_model_step_9005)
  model: /lustre/fsw/llmservice_nemo_speechlm/users/vmendelev/models/ear_tts/duplex-eartts-2mim_sw_et_eos_dp_eos_dup_fp32-stt-3-december_stt_edresson_model_R_digits_norm_eip_0.1_EA_model_step_9005
  server_type: generic
  server_gpus: 1
  server_entrypoint: python -m nemo_skills.inference.server.serve_unified
  server_args: >-
    --backend ear_tts
    --speaker_reference /lustre/fsw/llmservice_nemo_speechlm/users/vmendelev/models/ear_tts/Emma_S3_A1_SC7_singleturntarget_21_channel_1_audio_in.wav
    --config_path /lustre/fsw/llmservice_nemo_speechlm/users/vmendelev/models/ear_tts/nanov2_demo_model_eartts_updated.yaml
    --batch_size 1
    --batch_timeout 0.1
  data_dir: /lustre/fsw/llmservice_nemo_speechlm/users/vmendelev/tmp/data_dir
  num_chunks: 8
  gpus_per_node: 1
  extra_args: ++server.server_type=vllm_multimodal

# Scoring settings
scoring:
  sv_model: titanet
  asr_model_name: nvidia/parakeet-tdt-1.1b
  language: en
  with_utmosv2: true
  gpus: 1
